---
layout: post
title: "shell - grep와 정규화표현식"
author: "한결"
categories: blog
---

### grep

처음 아무것도 모르고 와서 리눅스 배울때 grep 명령어에서 미쳐버릴뻔 했는데.. 지금 보니 제일... 간단한 친구이다.
검색 도우미!

* 특징

  * 문자열 검색에 사용된다.
  * 정규화 표현식 (Regular Expression, regexp, regexr)
  * 찾은 내용을 화면에 출력한다.
  * 파일을 검색해도 파일의 내용은 변경되지 않음.
  * ASCII 텍스트, 스크립트 등 사용자가 내용을 확인할 수 있는 파일만 검색 가능. (실행파일 등 Binary 파일은 strings 명령어를 사용하여 검색한다.)

* 사용법

  1. grep [옵션] '[정규화표현식]' [검색대상]
  2. [명령어] | grep [옵션] '[정규화표현식]'

* 파이프라인 (Pipeline, ' | ')

  * 좌측 명령어의 실행결과 발생한 표준 출력을 우측 명령어의 표준 입력으로 전달한다.

    ```
    # df -h | grep '/export/home'
    ```

* grep 명령어의 옵션

  -i : 대소문자를 구분하지 않고 검색

  -l : 검색 결과를 출력하지 않고, 찾은 파일 이름만 출력

  -n : 검색된 내용 앞에 줄 수 표시

  -v : 해당 패턴이 없는 라인을 출력

  -c : 해당 패턴이 들어있는 라인의 개수를 출력

  -w : 단일 단어 패턴만 검색

  
* grep 사용 예

  1. 사용자 검색

     ```
     grep '[사용자이름]' /etc/passwd
     cat /etc/passwd | grep '[사용자이름]'
     ```

  2. 프로세스 검색

     ```
     ps -ef | grep '[프로세스이름]'
     ```

  3. 네트워크 연결 검색

     ```
     nestat -an | grep 'ESTABLISHED'
     ```
  
  
  
  

### 정규화표현식 Regular Expression

 특정한 규칙을 가진 문자열의 집합을 표현하는데 사용하는 형식 언어이다. 주로 Programming Language나 Text Editor 등 에서 문자열의 검색과 치환을 위한 용도로 쓰이고 있으며 입력한 문자열에서 특정한 조건을 표현할 경우 일반적인 조건문으로는 다소 복잡할 수 있는 표현을 정규표현식을 이용하면 매우 간단하게 표현 할 수 있다.  
 하지만 코드가 간단한 만큼 가독성이 떨어져서 표현식을 숙지하지 않으면 이해하기 힘들다는 점이 단점이다.  
  
  
* ^pattern : 패턴으로 시작되는 라인을 검색

* pattern$ : 패턴으로 끝나는 라인을 검색

* \ <pattern : 패턴으로 시작되는 단어를 검색

* pattern\ > : 패턴으로 끝나는 단어를 검색

* . : 아무 글자나 한 글자

* a* : 패턴이 0번 이상 반복되는 부분을 검색

  ```
  abc abbc abbbc ac => ab*c
  abfffc (x)
  ```

* .* : 길이 제한 없이 아무 글자 패턴 검색

  ```
  abffffc => a.*c
  ac, abc, abbbc, ahjakdhkjahsc, a                           c
  ```

* [    ] : 포함되는 글자 중 한 글자

  ```
  [abcdexz!]
  ```

* [A-Z] : 지정된 범위 중 한 글자

  ```
  [A-Z] : [ABCDEF...XYZ] [a-zA-Z0-9]
  ```

* [^A-Z] : 지정된 범위에 해당하지 않는 한 글자

  ```
  [^A-Z] : [ABCDE...XYZ]가 아닌 패턴 검색
  ```

* \ : Escape Sequence. 뒤 문자를 특수문자가 아닌 일반문자로 사용.
  
  
  
* Hello에 정규화 표현식으로 [ ^A-Z]  를 검색하면?

  ```
  # grep '[^A-Z]' testword
  Hello
  # grep -v '[A-Z]' testword
  ```

* datafile 에서 다음을 검색 입력했을 때 결과를 예상한 후 실행하기

  ``` 
  # grep '[정규화표현식]' datafile
  ```

  * NW : NW 패턴을 검색
  * ^n : n으로 시작하는 라인을 검색
  * 4$ : 4로 끝나는 라인 검색
  * TB Savage (홑따옴표 없이) : TB 패턴을 Savage와 datafile에서 검색
  * TB Savage (홑따옴표 치고) : TB Savage 패턴을 datafile에서 검색
  * 5\ .. : 5.으로 시작하고 한 글자가 이어지는 패턴 검색
  * \ .5 : .5인 패턴 검색
  * ^[we] : w이거나 e인 패턴으로 시작하는 라인
  * [^0-9] : 0-9가 아닌 한글자 패턴 검색
  * -v [0-9] : -v 옵션에 의하여 0-9가 들어있지 않은 라인 검색
  * [A-Z] : 대문자 두글자, 공백, 대문자 한글자 패턴 검색
  * ss* : s가 하나 있고 s가 0번 이상 반복
  * <north : north 패턴 중 앞이 분리된 단어인 형태 검색
  * <north> : north 패턴 중 앞뒤가 분리된 단어인 형태 검색


